- if player_1_id or player_2_id
  .row
    .col-xs-5.white
      .col-xs-12.col-sm-6.center
        = player_image player_1_id, "player_100" if player_1_id
      .col-xs-12.col-sm-6.center
        = team_image player_1_id.team, "team_80" if player_1_id
        .right= link_to "[Delete]", comparar_players_path(:player_2_id => player_2_id.nil? ? '' : player_2_id.id), remote: true if player_1_id

    .col-xs-2.white.height120

    .col-xs-5.white
      .col-xs-12.col-sm-6.center
        = player_image player_2_id, "player_100" if player_2_id
      .col-xs-12.col-sm-6.center
        = team_image player_2_id.team, "team_80" if player_2_id
        .right= link_to "[Delete]", comparar_players_path(:player_1_id => player_1_id.nil? ? '' : player_1_id.id), remote: true if player_2_id

  .row
    .col-xs-5.name
      - if player_1_id
        .col-xs-12
          %h3= player_1_id.name
          %h6= [player_1_id.position.text, player_1_id.team.name].join(" - ")
    .col-xs-2.center.white.height79
      %h2= "VS"

    .col-xs-5.name
      - if player_2_id
        .col-xs-12
          %h3= player_2_id.name
          %h6= [player_2_id.position.text, player_2_id.team.name].join(" - ")

  - statistic_1 = player_1_id.statistics.by_season(CURRENT_SEASON) if player_1_id
  - statistic_1_total = statistic_1.total if player_1_id
  - statistic_2 = player_2_id.statistics.by_season(CURRENT_SEASON) if player_2_id
  - statistic_2_total = statistic_2.total if player_2_id

  - fields = ["sm", "v", "pt", "a", "reb", "t1", "t2", "t3"]
  - fields.each do |field|
    .row
      .col-xs-5.player_1
        - if player_1_id
          - mean = statistic_1_total["#{field}"].to_f/statistic_1.played_games.to_f
          - value = mean.nan? ? 0 : mean.round 
          - text = mean.nan? ? 0 : mean.round(2) 
          %dd{class: "percentage percentage-#{value}"}
            %h4.text=text
      .col-xs-2.center.white.height40
        %h4=t("#{field}")
      .col-xs-5.player_2
        - if player_2_id
          - mean = statistic_2_total["#{field}"].to_f/statistic_2.played_games.to_f
          - value = mean.nan? ? 0 : mean.round 
          - text = mean.nan? ? 0 : mean.round(2)
          %dd{class: "percentage percentage-#{value}"}
            %h4.text=text

=hidden_field_tag :player_1_id, player_1_id.try(:id)
=hidden_field_tag :player_2_id, player_2_id.try(:id)    